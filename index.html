<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>AI Detection ‚Äî Eithanniel XII-4</title>

    <!-- TensorFlow & Teachable Machine -->
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@4.12.0/dist/tf.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@teachablemachine/image@0.8/dist/teachablemachine-image.min.js"></script>

    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Poppins:wght@700;800&display=swap" rel="stylesheet">

    <style>
        :root{
            --bg1: #0f172a;
            --bg2: #0b1220;
            --card: rgba(255,255,255,0.03);
            --glass: rgba(255,255,255,0.04);
            --accent: #22c1c3;
            --accent2: #fdbb2d;
            --muted: #9aa4b2;
            --success: #10b981;
            --danger: #ef4444;
            color-scheme: dark;
        }

        html,body{height:100%;overflow-x:hidden;}
        body{
            margin:0;
            font-family: 'Inter', system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
            background: linear-gradient(-45deg, #0f0c29, #302b63, #24243e, #0f0c29);
            background-size: 400% 400%;
            animation: gradientShift 15s ease infinite;
            display:flex;
            flex-direction:column;
            align-items:center;
            justify-content:center;
            padding:24px;
            color:#e6eef6;
            min-height:100vh;
            position:relative;
            overflow:hidden;
        }

        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        /* Animated background orbs */
        body::before, body::after {
            content: '';
            position: fixed;
            border-radius: 50%;
            filter: blur(80px);
            opacity: 0.5;
            z-index: -1;
            animation: orbFloat 20s ease-in-out infinite;
        }
        body::before {
            width: 600px;
            height: 600px;
            background: radial-gradient(circle, #ff006e 0%, #8338ec 50%, transparent 70%);
            top: -200px;
            left: -150px;
            animation-delay: 0s;
        }
        body::after {
            width: 500px;
            height: 500px;
            background: radial-gradient(circle, #00f5d4 0%, #00bbf9 50%, transparent 70%);
            bottom: -150px;
            right: -100px;
            animation-delay: -10s;
        }
        @keyframes orbFloat {
            0%, 100% { transform: translate(0, 0) scale(1); }
            25% { transform: translate(50px, 30px) scale(1.1); }
            50% { transform: translate(20px, -40px) scale(0.95); }
            75% { transform: translate(-30px, 20px) scale(1.05); }
        }

        /* Extra floating orbs via box-shadows on a pseudo element */
        .bg-orbs {
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            pointer-events: none;
            z-index: -1;
            overflow: hidden;
        }
        .bg-orbs .orb {
            position: absolute;
            border-radius: 50%;
            filter: blur(60px);
            opacity: 0.4;
            animation: orbDrift 25s ease-in-out infinite;
        }
        .bg-orbs .orb:nth-child(1) {
            width: 350px; height: 350px;
            background: linear-gradient(135deg, #f72585, #7209b7);
            top: 30%; left: 60%;
            animation-delay: -5s;
        }
        .bg-orbs .orb:nth-child(2) {
            width: 280px; height: 280px;
            background: linear-gradient(135deg, #4cc9f0, #4361ee);
            top: 60%; left: 20%;
            animation-delay: -12s;
        }
        .bg-orbs .orb:nth-child(3) {
            width: 200px; height: 200px;
            background: linear-gradient(135deg, #fee440, #f15bb5);
            top: 10%; left: 40%;
            animation-delay: -18s;
        }
        .bg-orbs .orb:nth-child(4) {
            width: 320px; height: 320px;
            background: linear-gradient(135deg, #06d6a0, #118ab2);
            top: 70%; left: 70%;
            animation-delay: -8s;
        }
        @keyframes orbDrift {
            0%, 100% { transform: translate(0, 0) rotate(0deg); }
            33% { transform: translate(40px, -60px) rotate(120deg); }
            66% { transform: translate(-50px, 40px) rotate(240deg); }
        }

        /* Sparkle particles */
        .particles {
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            pointer-events: none;
            z-index: -1;
            background-image: 
                radial-gradient(2px 2px at 20% 30%, rgba(255,255,255,0.8), transparent),
                radial-gradient(2px 2px at 40% 70%, rgba(255,255,255,0.6), transparent),
                radial-gradient(1px 1px at 90% 40%, rgba(255,255,255,0.9), transparent),
                radial-gradient(2px 2px at 60% 20%, rgba(255,255,255,0.7), transparent),
                radial-gradient(1px 1px at 10% 80%, rgba(255,255,255,0.8), transparent),
                radial-gradient(2px 2px at 70% 60%, rgba(255,255,255,0.5), transparent),
                radial-gradient(1px 1px at 80% 10%, rgba(255,255,255,0.9), transparent),
                radial-gradient(2px 2px at 30% 50%, rgba(255,255,255,0.6), transparent);
            background-size: 550px 550px;
            animation: sparkle 80s linear infinite;
        }
        @keyframes sparkle {
            from { background-position: 0 0; }
            to { background-position: 1100px 1100px; }
        }

        /* Floating apples */
        .floating-apples {
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            pointer-events: none;
            z-index: -1;
            overflow: hidden;
        }
        .floating-apples .apple {
            position: absolute;
            font-size: 40px;
            opacity: 0.6;
            animation: appleFloat 18s ease-in-out infinite;
            filter: drop-shadow(0 4px 8px rgba(0,0,0,0.3));
        }
        /* Ripe apples üçé */
        .floating-apples .apple.ripe { animation-name: appleFloat; }
        .floating-apples .apple.ripe:nth-child(1) { top: 8%; left: 5%; font-size: 38px; animation-duration: 16s; animation-delay: 0s; }
        .floating-apples .apple.ripe:nth-child(2) { top: 25%; left: 85%; font-size: 45px; animation-duration: 20s; animation-delay: -3s; }
        .floating-apples .apple.ripe:nth-child(3) { top: 70%; left: 12%; font-size: 35px; animation-duration: 18s; animation-delay: -8s; }
        .floating-apples .apple.ripe:nth-child(4) { top: 55%; left: 92%; font-size: 42px; animation-duration: 22s; animation-delay: -12s; }
        
        /* Unripe apples üçè */
        .floating-apples .apple.unripe { animation-name: appleFloat2; }
        .floating-apples .apple.unripe:nth-child(5) { top: 15%; left: 75%; font-size: 36px; animation-duration: 19s; animation-delay: -2s; }
        .floating-apples .apple.unripe:nth-child(6) { top: 80%; left: 80%; font-size: 44px; animation-duration: 17s; animation-delay: -7s; }
        .floating-apples .apple.unripe:nth-child(7) { top: 40%; left: 3%; font-size: 32px; animation-duration: 21s; animation-delay: -11s; }
        .floating-apples .apple.unripe:nth-child(8) { top: 90%; left: 45%; font-size: 38px; animation-duration: 15s; animation-delay: -5s; }
        
        /* Overripe apples (brown-tinted) */
        .floating-apples .apple.overripe { animation-name: appleFloat3; filter: drop-shadow(0 4px 8px rgba(0,0,0,0.3)) sepia(0.6) saturate(1.5) hue-rotate(-10deg); }
        .floating-apples .apple.overripe:nth-child(9) { top: 5%; left: 45%; font-size: 34px; animation-duration: 20s; animation-delay: -4s; }
        .floating-apples .apple.overripe:nth-child(10) { top: 60%; left: 60%; font-size: 40px; animation-duration: 18s; animation-delay: -9s; }
        .floating-apples .apple.overripe:nth-child(11) { top: 35%; left: 25%; font-size: 37px; animation-duration: 16s; animation-delay: -14s; }
        .floating-apples .apple.overripe:nth-child(12) { top: 85%; left: 20%; font-size: 43px; animation-duration: 23s; animation-delay: -1s; }

        @keyframes appleFloat {
            0%, 100% { transform: translate(0, 0) rotate(0deg) scale(1); }
            25% { transform: translate(15px, -25px) rotate(10deg) scale(1.05); }
            50% { transform: translate(-10px, -40px) rotate(-5deg) scale(0.95); }
            75% { transform: translate(20px, -15px) rotate(8deg) scale(1.02); }
        }
        @keyframes appleFloat2 {
            0%, 100% { transform: translate(0, 0) rotate(0deg) scale(1); }
            25% { transform: translate(-20px, -30px) rotate(-12deg) scale(0.98); }
            50% { transform: translate(15px, -50px) rotate(8deg) scale(1.06); }
            75% { transform: translate(-25px, -20px) rotate(-6deg) scale(1); }
        }
        @keyframes appleFloat3 {
            0%, 100% { transform: translate(0, 0) rotate(0deg) scale(1); }
            25% { transform: translate(25px, -20px) rotate(15deg) scale(1.03); }
            50% { transform: translate(-15px, -35px) rotate(-10deg) scale(0.97); }
            75% { transform: translate(10px, -45px) rotate(5deg) scale(1.04); }
        }

        /* Model Selector Styles */
        .model-selector {
            display: flex;
            gap: 16px;
            justify-content: center;
            margin-bottom: 24px;
            perspective: 1000px;
            flex-wrap: wrap;
        }
        
        .model-btn {
            position: relative;
            padding: 16px 32px;
            border: 2px solid rgba(255,255,255,0.1);
            border-radius: 16px;
            background: linear-gradient(135deg, rgba(255,255,255,0.05), rgba(255,255,255,0.02));
            color: var(--muted);
            font-family: 'Inter', sans-serif;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            overflow: hidden;
            backdrop-filter: blur(10px);
        }
        
        .model-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s ease;
        }
        
        .model-btn:hover::before {
            left: 100%;
        }
        
        .model-btn:hover {
            transform: translateY(-3px) scale(1.02);
            border-color: rgba(255,255,255,0.2);
            box-shadow: 0 10px 30px rgba(0,0,0,0.3), 0 0 20px rgba(34,193,195,0.2);
        }
        
        .model-btn.active {
            background: linear-gradient(135deg, var(--accent), #6ee7b7);
            border-color: transparent;
            color: #042027;
            transform: scale(1.05);
            box-shadow: 0 8px 25px rgba(34,193,195,0.4), 0 0 30px rgba(34,193,195,0.3);
            animation: activeGlow 2s ease-in-out infinite;
        }
        
        .model-btn.active::after {
            content: '';
            position: absolute;
            inset: -3px;
            border-radius: 19px;
            background: linear-gradient(135deg, var(--accent), #6ee7b7, var(--accent2));
            z-index: -1;
            animation: borderRotate 3s linear infinite;
            filter: blur(10px);
            opacity: 0.6;
        }
        
        @keyframes activeGlow {
            0%, 100% { box-shadow: 0 8px 25px rgba(34,193,195,0.4), 0 0 30px rgba(34,193,195,0.3); }
            50% { box-shadow: 0 8px 35px rgba(34,193,195,0.6), 0 0 40px rgba(34,193,195,0.4); }
        }
        
        @keyframes borderRotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        
        .model-btn .icon {
            font-size: 22px;
            margin-right: 10px;
            display: inline-block;
            animation: iconBounce 2s ease-in-out infinite;
        }
        
        .model-btn:hover .icon {
            animation: iconSpin 0.5s ease-in-out;
        }
        
        @keyframes iconBounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-3px); }
        }
        
        @keyframes iconSpin {
            0% { transform: rotate(0deg) scale(1); }
            50% { transform: rotate(15deg) scale(1.2); }
            100% { transform: rotate(0deg) scale(1); }
        }

        /* Floating trash emojis (hidden by default) */
        .floating-trash {
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            pointer-events: none;
            z-index: -1;
            overflow: hidden;
            opacity: 0;
            transition: opacity 0.8s ease;
        }
        
        .floating-trash.active {
            opacity: 1;
        }
        
        .floating-trash .trash {
            position: absolute;
            font-size: 40px;
            opacity: 0.6;
            animation: trashFloat 18s ease-in-out infinite;
            filter: drop-shadow(0 4px 12px rgba(0,0,0,0.4));
        }
        
        .floating-trash .trash:nth-child(1) { top: 8%; left: 5%; font-size: 38px; animation-duration: 16s; animation-delay: 0s; }
        .floating-trash .trash:nth-child(2) { top: 25%; left: 85%; font-size: 45px; animation-duration: 20s; animation-delay: -3s; }
        .floating-trash .trash:nth-child(3) { top: 70%; left: 12%; font-size: 35px; animation-duration: 18s; animation-delay: -8s; }
        .floating-trash .trash:nth-child(4) { top: 55%; left: 92%; font-size: 42px; animation-duration: 22s; animation-delay: -12s; }
        .floating-trash .trash:nth-child(5) { top: 15%; left: 75%; font-size: 36px; animation-duration: 19s; animation-delay: -2s; }
        .floating-trash .trash:nth-child(6) { top: 80%; left: 80%; font-size: 44px; animation-duration: 17s; animation-delay: -7s; }
        .floating-trash .trash:nth-child(7) { top: 40%; left: 3%; font-size: 32px; animation-duration: 21s; animation-delay: -11s; }
        .floating-trash .trash:nth-child(8) { top: 90%; left: 45%; font-size: 38px; animation-duration: 15s; animation-delay: -5s; }
        .floating-trash .trash:nth-child(9) { top: 5%; left: 45%; font-size: 34px; animation-duration: 20s; animation-delay: -4s; }
        .floating-trash .trash:nth-child(10) { top: 60%; left: 60%; font-size: 40px; animation-duration: 18s; animation-delay: -9s; }
        .floating-trash .trash:nth-child(11) { top: 35%; left: 25%; font-size: 37px; animation-duration: 16s; animation-delay: -14s; }
        .floating-trash .trash:nth-child(12) { top: 85%; left: 20%; font-size: 43px; animation-duration: 23s; animation-delay: -1s; }
        
        @keyframes trashFloat {
            0%, 100% { transform: translate(0, 0) rotate(0deg) scale(1); }
            25% { transform: translate(20px, -30px) rotate(15deg) scale(1.1); }
            50% { transform: translate(-15px, -50px) rotate(-10deg) scale(0.95); }
            75% { transform: translate(25px, -20px) rotate(8deg) scale(1.05); }
        }
        
        /* Theme transitions */
        .floating-apples {
            transition: opacity 0.8s ease;
        }
        
        .floating-apples.hidden {
            opacity: 0;
        }
        
        /* Title transition animation */
        .hero h1.switching {
            opacity: 0;
            transform: translateY(-20px) scale(0.9);
        }
        
        .hero h1 {
            transition: opacity 0.4s ease, transform 0.4s ease;
        }

        /* Hero header / sign */
        .hero{
            text-align:center;
            margin-bottom:28px;
            animation: fadeInDown .6s ease-out;
        }
        .hero h1{
            font-family:'Poppins',sans-serif;
            font-size:clamp(28px,5vw,42px);
            font-weight:800;
            margin:0;
            background:linear-gradient(90deg,var(--accent),#6ee7b7,var(--accent2));
            background-size:200% auto;
            -webkit-background-clip:text;
            background-clip:text;
            -webkit-text-fill-color:transparent;
            animation:shimmer 3s linear infinite;
        }
        .hero .badge{
            display:inline-block;
            margin-top:8px;
            padding:6px 16px;
            font-size:13px;
            font-weight:600;
            letter-spacing:1px;
            border-radius:999px;
            background:rgba(255,255,255,0.06);
            color:var(--muted);
            border:1px solid rgba(255,255,255,0.08);
        }
        @keyframes shimmer{
            to{background-position:200% center}
        }
        @keyframes fadeInDown{
            from{opacity:0;transform:translateY(-18px)}
            to{opacity:1;transform:translateY(0)}
        }

        .container{
            width:100%;
            max-width:920px;
            background: linear-gradient(180deg, rgba(255,255,255,0.025), rgba(255,255,255,0.01));
            border-radius:20px;
            box-shadow: 0 12px 40px rgba(2,6,23,0.55), 0 0 0 1px rgba(255,255,255,0.04);
            display:grid;
            grid-template-columns: 1fr 360px;
            gap:24px;
            padding:26px;
            align-items:start;
            animation: fadeIn .5s ease-out;
        }
        @keyframes fadeIn{from{opacity:0;transform:scale(.98)}to{opacity:1;transform:scale(1)}}

        /* Mouse-reactive glow effect */
        .container{
            position:relative;
            overflow:hidden;
            transition: transform .15s ease-out, box-shadow .2s ease;
            --glow-x: 50%;
            --glow-y: 50%;
        }
        .container::before{
            content:'';
            position:absolute;
            width:500px;
            height:500px;
            left:var(--glow-x, 50%);
            top:var(--glow-y, 50%);
            background:radial-gradient(circle, rgba(34,193,195,0.18) 0%, rgba(110,231,183,0.08) 40%, transparent 70%);
            pointer-events:none;
            transform:translate(-50%,-50%);
            opacity:0;
            transition:opacity .4s ease;
            z-index:0;
        }
        .container:hover::before{opacity:1;}
        .container.tilt{transform:perspective(1000px) rotateX(var(--rotateX)) rotateY(var(--rotateY));}
        .container > *{position:relative;z-index:1;}

        /* Floating animation for hero */
        .hero{
            animation: fadeInDown .6s ease-out, float 4s ease-in-out infinite;
        }
        @keyframes float{
            0%,100%{transform:translateY(0)}
            50%{transform:translateY(-6px)}
        }

        /* Button hover effects */
        .btn{
            transition: transform .15s ease, box-shadow .2s ease, filter .2s ease;
        }
        .btn:hover{
            transform:translateY(-2px) scale(1.02);
            box-shadow:0 6px 20px rgba(34,193,195,0.3);
            filter:brightness(1.1);
        }
        .btn:active{transform:translateY(0) scale(0.98);}

        /* Card hover lift */
        .card{
            transition: transform .2s ease, box-shadow .25s ease;
        }
        .card:hover{
            transform:translateY(-3px);
            box-shadow:0 8px 25px rgba(0,0,0,0.2);
        }

        /* Dropzone pulse on hover */
        .dropzone{
            transition: border-color .18s, transform .12s, box-shadow .25s ease;
        }
        .dropzone:hover{
            border-color:rgba(34,193,195,0.5);
            box-shadow:0 0 20px rgba(34,193,195,0.1);
        }

        /* Progress bar animation */
        .bar > i{
            transition: width .4s cubic-bezier(.4,0,.2,1);
            animation: barGlow 2s ease-in-out infinite;
        }
        @keyframes barGlow{
            0%,100%{filter:brightness(1)}
            50%{filter:brightness(1.2)}
        }

        /* Badge pulse */
        .hero .badge{
            animation: badgePulse 3s ease-in-out infinite;
        }
        @keyframes badgePulse{
            0%,100%{box-shadow:0 0 0 0 rgba(34,193,195,0.4)}
            50%{box-shadow:0 0 0 8px rgba(34,193,195,0)}
        }

        /* Prediction row stagger animation */
        .pred{
            opacity:0;
            animation: slideIn .35s ease forwards;
        }
        @keyframes slideIn{
            from{opacity:0;transform:translateX(-12px)}
            to{opacity:1;transform:translateX(0)}
        }

        /* Top result glow */
        .top-result{
            transition: background .3s ease, box-shadow .3s ease;
        }
        .top-result:hover{
            box-shadow:0 0 15px rgba(34,193,195,0.2);
        }

        /* Status dot pulse when ready */
        .dot.ready{
            animation: dotPulse 2s ease-in-out infinite;
        }
        @keyframes dotPulse{
            0%,100%{box-shadow:0 0 0 0 rgba(16,185,129,0.5)}
            50%{box-shadow:0 0 0 6px rgba(16,185,129,0)}
        }

        .left{
            padding:8px 12px;
        }

        h1{margin:0 0 6px 0;font-size:20px}
        p.lead{margin:0 0 16px 0;color:var(--muted)}

        .uploader{
            background:var(--card);
            border-radius:12px;
            padding:14px;
            display:flex;
            gap:12px;
            align-items:center;
            flex-direction:column;
        }

        .dropzone{
            width:100%;
            border:2px dashed rgba(255,255,255,0.06);
            border-radius:10px;
            padding:14px;
            display:flex;
            gap:12px;
            align-items:center;
            justify-content:center;
            min-height:220px;
            background: linear-gradient(180deg, rgba(255,255,255,0.01), transparent);
            transition: border-color .18s, transform .12s;
        }

        .dropzone.dragover{border-color: rgba(34,193,195,0.9); transform: translateY(-2px)}

        .preview{
            width:100%;
            max-width:100%;
            height:220px;
            border-radius:8px;
            overflow:hidden;
            background: linear-gradient(90deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
            display:flex;
            align-items:center;
            justify-content:center;
        }

        .preview img{ width:100%; height:100%; object-fit:cover; display:block }
        .placeholder{color:var(--muted); font-size:14px}

        .controls{width:100%; display:flex; gap:8px; margin-top:10px}
        .btn{
            flex:1; padding:10px 12px; border-radius:10px; border:0; cursor:pointer; font-weight:600;
            background:linear-gradient(90deg,var(--accent), #6ee7b7); color:#042027;
        }

        .sidebar{padding:10px 12px;}
        .card{background:var(--glass); border-radius:12px; padding:12px}

        .status{display:flex; gap:8px; align-items:center; font-size:13px; color:var(--muted)}
        .dot{width:10px; height:10px; border-radius:50%; background:rgba(255,255,255,0.06)}
        .dot.ready{background:var(--success)}

        .predictions{margin-top:12px; display:flex; flex-direction:column; gap:8px}
        .pred{display:flex; gap:8px; align-items:center}
        .pred .label{flex:0 0 110px; font-size:13px}
        .bar{flex:1; height:10px; background:rgba(255,255,255,0.04); border-radius:999px; overflow:hidden}
        .bar > i{display:block; height:100%; background:linear-gradient(90deg,var(--accent), #8ed7e6)}
        .percent{width:48px; text-align:right; font-size:12px; color:var(--muted)}

        .top-result{margin-top:12px; padding:10px; border-radius:10px; background:linear-gradient(90deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); display:flex; align-items:center; justify-content:space-between}

        .spinner{width:18px; height:18px; border:3px solid rgba(255,255,255,0.06); border-top-color:var(--accent); border-radius:50%; animation:spin 1s linear infinite}
        @keyframes spin{to{transform:rotate(360deg)}}

        /* Image loading animation */
        .preview.loading {
            position: relative;
        }
        .preview.loading::after {
            content: '';
            position: absolute;
            inset: 0;
            background: linear-gradient(90deg, transparent, rgba(34,193,195,0.3), transparent);
            animation: shimmerLoad 1.5s infinite;
        }
        @keyframes shimmerLoad {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }
        .loading-overlay {
            position: absolute;
            inset: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background: rgba(15, 23, 42, 0.85);
            backdrop-filter: blur(8px);
            border-radius: 8px;
            z-index: 10;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease;
        }
        .loading-overlay.active {
            opacity: 1;
            pointer-events: auto;
        }
        .loading-spinner {
            width: 50px;
            height: 50px;
            border: 4px solid rgba(255,255,255,0.1);
            border-top-color: var(--accent);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        .loading-text {
            margin-top: 16px;
            color: var(--muted);
            font-size: 14px;
            animation: loadingPulse 1.5s ease-in-out infinite;
        }
        @keyframes loadingPulse {
            0%, 100% { opacity: 0.5; }
            50% { opacity: 1; }
        }
        .loading-progress {
            width: 120px;
            height: 4px;
            background: rgba(255,255,255,0.1);
            border-radius: 4px;
            margin-top: 12px;
            overflow: hidden;
        }
        .loading-progress-bar {
            height: 100%;
            background: linear-gradient(90deg, var(--accent), #6ee7b7);
            border-radius: 4px;
            animation: progressIndeterminate 1.5s ease-in-out infinite;
        }
        @keyframes progressIndeterminate {
            0% { width: 0%; margin-left: 0; }
            50% { width: 70%; margin-left: 15%; }
            100% { width: 0%; margin-left: 100%; }
        }

        /* Rating buttons */
        .rating-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
            margin-top: 14px;
            padding: 14px 16px;
            background: linear-gradient(135deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01));
            border-radius: 12px;
            border: 1px solid rgba(255,255,255,0.06);
            opacity: 0;
            transform: translateY(10px);
            transition: opacity 0.4s ease, transform 0.4s ease;
        }
        .rating-container.visible {
            opacity: 1;
            transform: translateY(0);
        }
        .rating-label {
            font-size: 13px;
            font-weight: 500;
            color: #c4cdd9;
            letter-spacing: 0.3px;
        }
        .rating-buttons {
            display: flex;
            gap: 12px;
            align-items: center;
        }
        .rating-btn {
            width: 48px;
            height: 48px;
            border: 2px solid rgba(255,255,255,0.1);
            border-radius: 14px;
            background: rgba(255,255,255,0.03);
            cursor: pointer;
            font-size: 22px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            position: relative;
            overflow: hidden;
        }
        .rating-btn::before {
            content: '';
            position: absolute;
            inset: 0;
            background: radial-gradient(circle at center, rgba(255,255,255,0.2), transparent);
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        .rating-btn:hover::before {
            opacity: 1;
        }
        .rating-btn:hover {
            transform: scale(1.1);
            border-color: rgba(255,255,255,0.2);
        }
        .rating-btn.thumbs-up:hover {
            border-color: var(--success);
            box-shadow: 0 0 20px rgba(16, 185, 129, 0.3);
        }
        .rating-btn.thumbs-down:hover {
            border-color: var(--danger);
            box-shadow: 0 0 20px rgba(239, 68, 68, 0.3);
        }
        .rating-btn.selected.thumbs-up {
            background: linear-gradient(135deg, var(--success), #34d399);
            border-color: transparent;
            animation: ratingPop 0.5s ease;
        }
        .rating-btn.selected.thumbs-down {
            background: linear-gradient(135deg, var(--danger), #f87171);
            border-color: transparent;
            animation: ratingPop 0.5s ease;
        }
        @keyframes ratingPop {
            0% { transform: scale(1); }
            30% { transform: scale(1.3); }
            60% { transform: scale(0.9); }
            100% { transform: scale(1); }
        }
        .rating-btn:active {
            transform: scale(0.95);
        }
        .rating-thanks {
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 13px;
            font-weight: 600;
            color: var(--success);
            opacity: 0;
            transform: translateY(-5px);
            transition: opacity 0.4s ease, transform 0.4s ease;
            margin-top: 4px;
        }
        .rating-thanks .check-icon {
            font-size: 14px;
        }
        .rating-thanks.visible {
            opacity: 1;
            transform: translateY(0);
        }

        @media (max-width:880px){
            .container{grid-template-columns:1fr;}
            .sidebar{order:3}
        }
    </style>
</head>

<body>

<!-- Animated background elements -->
<div class="particles"></div>
<div class="bg-orbs">
    <div class="orb"></div>
    <div class="orb"></div>
    <div class="orb"></div>
    <div class="orb"></div>
</div>
<div class="floating-apples" id="floatingApples">
    <!-- Ripe apples üçé -->
    <span class="apple ripe">üçé</span>
    <span class="apple ripe">üçé</span>
    <span class="apple ripe">üçé</span>
    <span class="apple ripe">üçé</span>
    <!-- Unripe apples üçè -->
    <span class="apple unripe">üçè</span>
    <span class="apple unripe">üçè</span>
    <span class="apple unripe">üçè</span>
    <span class="apple unripe">üçè</span>
    <!-- Overripe apples (styled üçé) -->
    <span class="apple overripe">üçé</span>
    <span class="apple overripe">üçé</span>
    <span class="apple overripe">üçé</span>
    <span class="apple overripe">üçé</span>
</div>

<div class="floating-trash" id="floatingTrash">
    <span class="trash">üóëÔ∏è</span>
    <span class="trash">‚ôªÔ∏è</span>
    <span class="trash">üì¶</span>
    <span class="trash">ü•´</span>
    <span class="trash">üß¥</span>
    <span class="trash">üì∞</span>
    <span class="trash">üçæ</span>
    <span class="trash">ü•§</span>
    <span class="trash">üßÉ</span>
    <span class="trash">üõí</span>
    <span class="trash">üóëÔ∏è</span>
    <span class="trash">‚ôªÔ∏è</span>
</div>

<header class="hero">
    <h1 id="heroTitle">AI to Detect</h1>
    <span class="badge">Eithanniel XII-4</span>
</header>

<div class="model-selector" id="modelSelector">
    <button class="model-btn active" data-model="apple" id="appleBtn">
        <span class="icon">üçé</span>Apple Ripeness
    </button>
    <button class="model-btn" data-model="trash" id="trashBtn">
        <span class="icon">‚ôªÔ∏è</span>Trash Classification
    </button>
</div>

<div class="container" role="main">
    <div class="left">
        <h1>Image Recognition</h1>
        <p class="lead">Upload or drag an image to get predictions from the model.</p>

        <div class="uploader card">
            <div id="dropzone" class="dropzone" tabindex="0" aria-label="Drop image here or click to select">
                <div class="preview" id="previewBox">
                    <div class="placeholder" id="placeholder">No image selected</div>
                    <img id="preview" alt="Preview image" style="display:none">
                    <div class="loading-overlay" id="loadingOverlay">
                        <div class="loading-spinner"></div>
                        <div class="loading-text">Processing image...</div>
                        <div class="loading-progress">
                            <div class="loading-progress-bar"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="controls">
                <input id="fileInput" type="file" accept="image/*" style="display:none">
                <button id="chooseBtn" class="btn">Choose Image</button>
                <button id="clearBtn" class="btn" style="background:transparent;color:var(--muted);font-weight:600;border:1px solid rgba(255,255,255,0.04)">Clear</button>
            </div>

            <div style="width:100%; display:flex; justify-content:space-between; margin-top:10px">
                <div class="status"><div id="modelDot" class="dot"></div><div id="modelText">Loading model...</div></div>
                <div class="status"><div style="font-size:12px;color:var(--muted)">Model: <strong style="color:#dff6f6">Teachable Machine</strong></div></div>
            </div>
        </div>
    </div>

    <aside class="sidebar">
        <div class="card">
            <div style="display:flex; align-items:center; justify-content:space-between">
                <strong>Top prediction</strong>
                <div id="busy" style="visibility:hidden"><div class="spinner" aria-hidden></div></div>
            </div>

            <div id="topResult" class="top-result" style="margin-top:8px">No result yet</div>

            <div class="rating-container" id="ratingContainer">
                <span class="rating-label">Was this prediction accurate?</span>
                <div class="rating-buttons">
                    <button class="rating-btn thumbs-up" id="thumbsUp" title="Yes, accurate">üëç</button>
                    <button class="rating-btn thumbs-down" id="thumbsDown" title="No, inaccurate">üëé</button>
                </div>
                <span class="rating-thanks" id="ratingThanks"><span class="check-icon">‚úì</span> Thanks for your feedback!</span>
            </div>

            <div style="margin-top:12px"><strong>All predictions</strong></div>
            <div id="predictions" class="predictions"></div>
        </div>
    </aside>
</div>

<script>
    // Model configurations
    const MODELS = {
        apple: {
            url: "https://teachablemachine.withgoogle.com/models/roxBxzJ3j/",
            title: "Ripe Detection",
            name: "Apple Ripeness"
        },
        trash: {
            url: "https://teachablemachine.withgoogle.com/models/aN-LO1JPf/",
            title: "Trash Classification",
            name: "Trash Classifier"
        }
    };
    
    let currentModelType = 'apple';
    let model = null;
    let modelsCache = {}; // Cache loaded models

    // DOM
    const dropzone = document.getElementById('dropzone');
    const fileInput = document.getElementById('fileInput');
    const chooseBtn = document.getElementById('chooseBtn');
    const clearBtn = document.getElementById('clearBtn');
    const preview = document.getElementById('preview');
    const placeholder = document.getElementById('placeholder');
    const previewBox = document.getElementById('previewBox');
    const modelDot = document.getElementById('modelDot');
    const modelText = document.getElementById('modelText');
    const predictionsEl = document.getElementById('predictions');
    const topResult = document.getElementById('topResult');
    const busy = document.getElementById('busy');
    const heroTitle = document.getElementById('heroTitle');
    const floatingApples = document.getElementById('floatingApples');
    const floatingTrash = document.getElementById('floatingTrash');
    const appleBtn = document.getElementById('appleBtn');
    const trashBtn = document.getElementById('trashBtn');
    const loadingOverlay = document.getElementById('loadingOverlay');
    const ratingContainer = document.getElementById('ratingContainer');
    const thumbsUp = document.getElementById('thumbsUp');
    const thumbsDown = document.getElementById('thumbsDown');
    const ratingThanks = document.getElementById('ratingThanks');

    // Load model
    async function loadModel(modelType = 'apple'){
        const modelConfig = MODELS[modelType];
        
        // Check cache first
        if (modelsCache[modelType]) {
            model = modelsCache[modelType];
            modelDot.classList.add('ready');
            modelText.textContent = `${modelConfig.name} ready`;
            console.log(`Model ${modelType} loaded from cache`);
            return;
        }
        
        modelDot.classList.remove('ready');
        modelDot.style.background = '';
        modelText.textContent = `Loading ${modelConfig.name}...`;
        
        try{
            const loadedModel = await tmImage.load(modelConfig.url + 'model.json', modelConfig.url + 'metadata.json');
            modelsCache[modelType] = loadedModel;
            model = loadedModel;
            modelDot.classList.add('ready');
            modelText.textContent = `${modelConfig.name} ready`;
            console.log(`Model ${modelType} loaded`);
        }catch(err){
            modelDot.style.background = 'var(--danger)';
            modelText.textContent = 'Failed to load model';
            console.error('Model load error', err);
        }
    }
    
    // Switch model function
    async function switchModel(modelType) {
        if (currentModelType === modelType) return;
        
        currentModelType = modelType;
        const modelConfig = MODELS[modelType];
        
        // Animate title change
        heroTitle.classList.add('switching');
        
        setTimeout(() => {
            heroTitle.textContent = modelConfig.title;
            heroTitle.classList.remove('switching');
        }, 400);
        
        // Switch floating elements
        if (modelType === 'trash') {
            floatingApples.classList.add('hidden');
            setTimeout(() => floatingTrash.classList.add('active'), 400);
        } else {
            floatingTrash.classList.remove('active');
            setTimeout(() => floatingApples.classList.remove('hidden'), 400);
        }
        
        // Update button states
        appleBtn.classList.toggle('active', modelType === 'apple');
        trashBtn.classList.toggle('active', modelType === 'trash');
        
        // Clear current preview and predictions
        clearPreview();
        
        // Load the new model
        await loadModel(modelType);
    }
    
    // Model selector event listeners
    appleBtn.addEventListener('click', () => switchModel('apple'));
    trashBtn.addEventListener('click', () => switchModel('trash'));
    
    // Initial load
    loadModel('apple');

    // Helpers
    function showBusy(on){ busy.style.visibility = on ? 'visible' : 'hidden'; }

    function clearPreview(){
        preview.src = '';
        preview.style.display = 'none';
        placeholder.style.display = 'block';
        predictionsEl.innerHTML = '';
        topResult.textContent = 'No result yet';
        loadingOverlay.classList.remove('active');
        previewBox.classList.remove('loading');
        ratingContainer.classList.remove('visible');
        thumbsUp.classList.remove('selected');
        thumbsDown.classList.remove('selected');
        ratingThanks.classList.remove('visible');
    }

    function handleFile(file){
        if(!file) return;
        const url = URL.createObjectURL(file);
        placeholder.style.display = 'none';
        preview.style.display = 'block';
        previewBox.classList.add('loading');
        loadingOverlay.classList.add('active');
        
        // Reset rating
        ratingContainer.classList.remove('visible');
        thumbsUp.classList.remove('selected');
        thumbsDown.classList.remove('selected');
        ratingThanks.classList.remove('visible');
        
        preview.src = url;
        preview.onload = () => {
            // Small delay for visual feedback
            setTimeout(() => {
                predictImage(preview);
            }, 300);
        };
    }

    async function predictImage(imgElement){
        if(!model){ alert('Model belum siap'); return; }
        showBusy(true);
        try{
            const predictions = await model.predict(imgElement, false);
            // Sort descending
            predictions.sort((a,b) => b.probability - a.probability);

            // Top
            const best = predictions[0];
            topResult.innerHTML = `<div style="display:flex;flex-direction:column"><strong>${best.className}</strong><small style="color:var(--muted)">${(best.probability*100).toFixed(2)}%</small></div>`;

            // All predictions
            predictionsEl.innerHTML = '';
            predictions.forEach(p => {
                const row = document.createElement('div'); row.className = 'pred';
                const label = document.createElement('div'); label.className = 'label'; label.textContent = p.className;
                const barWrap = document.createElement('div'); barWrap.className = 'bar';
                const bar = document.createElement('i'); bar.style.width = (p.probability*100) + '%';
                barWrap.appendChild(bar);
                const percent = document.createElement('div'); percent.className = 'percent'; percent.textContent = (p.probability*100).toFixed(2) + '%';
                row.appendChild(label); row.appendChild(barWrap); row.appendChild(percent);
                predictionsEl.appendChild(row);
            });
            
            // Hide loading and show rating
            loadingOverlay.classList.remove('active');
            previewBox.classList.remove('loading');
            setTimeout(() => ratingContainer.classList.add('visible'), 200);
            
        }catch(err){
            console.error(err); alert('Error saat memproses gambar');
            loadingOverlay.classList.remove('active');
            previewBox.classList.remove('loading');
        }finally{ showBusy(false); }
    }

    // Drag & drop
    ['dragenter','dragover'].forEach(evt => dropzone.addEventListener(evt, (e)=>{ e.preventDefault(); dropzone.classList.add('dragover'); }));
    ['dragleave','drop'].forEach(evt => dropzone.addEventListener(evt, (e)=>{ e.preventDefault(); dropzone.classList.remove('dragover'); }));

    dropzone.addEventListener('drop', (e)=>{
        const file = e.dataTransfer.files[0];
        if(file && file.type.startsWith('image/')) handleFile(file);
    });

    // Click to open file dialog
    dropzone.addEventListener('click', ()=> fileInput.click());
    chooseBtn.addEventListener('click', ()=> fileInput.click());
    clearBtn.addEventListener('click', clearPreview);

    fileInput.addEventListener('change', (e)=> handleFile(e.target.files[0]));

    // keyboard accessibility
    dropzone.addEventListener('keydown', (e)=>{ if(e.key === 'Enter' || e.key === ' ') fileInput.click(); });

    // initialize
    clearPreview();
    
    // Rating button handlers
    function handleRating(isPositive) {
        thumbsUp.classList.remove('selected');
        thumbsDown.classList.remove('selected');
        
        if (isPositive) {
            thumbsUp.classList.add('selected');
        } else {
            thumbsDown.classList.add('selected');
        }
        
        ratingThanks.classList.add('visible');
        
        // Log feedback (could be sent to analytics)
        console.log(`User rated prediction as ${isPositive ? 'accurate' : 'inaccurate'} for model: ${currentModelType}`);
    }
    
    thumbsUp.addEventListener('click', () => handleRating(true));
    thumbsDown.addEventListener('click', () => handleRating(false));

    // ===== MOUSE-REACTIVE EFFECTS =====
    const container = document.querySelector('.container');

    // Tilt effect on mouse move
    container.addEventListener('mousemove', (e) => {
        const rect = container.getBoundingClientRect();
        const x = e.clientX - rect.left;
        const y = e.clientY - rect.top;
        const centerX = rect.width / 2;
        const centerY = rect.height / 2;

        // Calculate rotation (max ¬±4 degrees)
        const rotateY = ((x - centerX) / centerX) * 4;
        const rotateX = ((centerY - y) / centerY) * 4;

        container.style.setProperty('--rotateX', rotateX + 'deg');
        container.style.setProperty('--rotateY', rotateY + 'deg');
        container.classList.add('tilt');

        // Move glow to cursor position
        container.style.setProperty('--glow-x', x + 'px');
        container.style.setProperty('--glow-y', y + 'px');
    });

    container.addEventListener('mouseleave', () => {
        container.classList.remove('tilt');
        container.style.setProperty('--rotateX', '0deg');
        container.style.setProperty('--rotateY', '0deg');
    });

    // Add stagger animation delay to prediction rows
    const originalPredictImage = predictImage;
    predictImage = async function(imgElement) {
        await originalPredictImage(imgElement);
        // Add stagger delays to prediction rows
        document.querySelectorAll('.pred').forEach((row, i) => {
            row.style.animationDelay = (i * 0.08) + 's';
        });
    };
</script>

</body>
</html>

